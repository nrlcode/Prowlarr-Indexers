id: torrentio
name: Torrentio
description: "Torrentio Indexer for Real-Debrid Cached Hashes"
language: en-US
type: public
encoding: UTF-8
followredirect: false
testlinktorrent: false
requestDelay: 2
links:
  - https://torrentio.strem.fun/

caps:
  categories:
    Movies: Movies
    TV: TV

  modes:
    search: [q]
    tv-search: [q, season, ep, imdbid]
    movie-search: [q, imdbid]
  allowrawsearch: false

settings:
  - name: default_movie_imdbid
    type: text
    label: Default Movie IMDB ID
    default: tt0137523
  - name: default_tv_imdbid
    type: text
    label: Default TV IMDB ID
    default: tt1632701

search:
  paths:
    - path: |
        https://torrentio.strem.fun/sort=qualitysize%7Cqualityfilter=480p,scr,cam/stream/{{ if eq .Query.Type "movie" }}movie/{{ .Query.IMDBID }}.json{{ else if eq .Query.Type "tvsearch" }}series/{{ .Query.IMDBID }}:{{ .Query.Season }}:{{ .Query.Ep }}.json{{ else }}search/{{ .Config.default_movie_imdbid }}.json{{ end }}
      method: get
      response:
        type: json
        noResultsMessage: '"streams": []'
      categories: 
        - Movies
        - TV

  rows:
    selector: streams
    missingAttributeEqualsNoResults: true

  fields:
    title:
      selector: title
      filters:
        - name: split
          args: ["\n", "0"]
    infohash:
      selector: infoHash
    size:
      selector: title
      filters:
        - name: regexp
          args: "\\b(\\d+(?:\\.\\d+)? [MG]B)\\b"
    seeders:
      selector: title
      filters:
        - name: regexp
          args: "(\\uD83D\\uDC64 \\d+)"
# engine n/a
